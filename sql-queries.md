# 💾 SQL-запросы для анализа данных

Этот раздел содержит **обучающую последовательность SQL-запросов**, демонстрирующих работу с базой данных психологического центра.

Запросы упорядочены **от базовых операций к более сложным аналитическим конструкциям**, включая:
- выборку данных (`SELECT`)
- фильтрацию и сортировку (`WHERE`, `ORDER BY`)
- соединение таблиц (`JOIN`)
- агрегацию (`COUNT`, `AVG`)
- подзапросы и CTE

Каждый запрос сопровождается **бизнес-задачей**, чтобы показать, как SQL помогает принимать решения в реальной системе.

---

## 1. Список всех психотерапевтов с их методом работы

**Бизнес-задача:**  
Клиент на сайте хочет выбрать специалиста по терапевтическому подходу (например, когнитивно-поведенческий, гештальт). Этот запрос нужен для отображения списка терапевтов на странице "Психотерапевты".

```sql
SELECT 
    u.last_name, 
    u.first_name, 
    u.middle_name, 
    t.method
FROM therapist t
INNER JOIN "user" u ON t.user_id = u.id
ORDER BY t.method, u.last_name;
```

## 2. Все клиенты старше 25 лет

**Бизнес-задача:**  
SMM-менеджер или администратор планирует целевую маркетинговую кампанию для взрослой аудитории (например, «терапия для родителей» или «работа со стрессом у профессионалов»). Этот запрос позволяет выделить клиентов старше 25 лет для сегментации и персонализированных рассылок.

```sql
SELECT 
    u.last_name, 
    u.first_name, 
    u.middle_name, 
    u.date_of_birth
FROM "user" u
WHERE u.role = 'client'
  AND EXTRACT(YEAR FROM AGE(CURRENT_DATE, u.date_of_birth)) > 25
ORDER BY u.last_name, u.first_name;
```
